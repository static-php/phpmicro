<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>micro SAPI for PHP | micro SAPI</title>
    <meta name="description" content="micro SAPI makes PHP self-executable, allowing you to run php-cli apps without any PHP installation.">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/assets/style.BzOXsVPp.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.BRjg8NX1.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.D-ocRNrx.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BKqm66bb.js">
    <link rel="modulepreload" href="/assets/en_index.md.CIs_RpW8.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-304c8b69><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-304c8b69 data-v-d5bf7c8e><div class="VPNavBar" data-v-d5bf7c8e data-v-8eab0e6d><div class="wrapper" data-v-8eab0e6d><div class="container" data-v-8eab0e6d><div class="title" data-v-8eab0e6d><div class="VPNavBarTitle has-sidebar" data-v-8eab0e6d data-v-d4488dd0><a class="title" href="/en/" data-v-d4488dd0><!--[--><!--]--><!----><span data-v-d4488dd0>micro SAPI</span><!--[--><!--]--></a></div></div><div class="content" data-v-8eab0e6d><div class="content-body" data-v-8eab0e6d><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8eab0e6d><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8eab0e6d data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/en/" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://static-php.dev" target="_blank" rel="noreferrer" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>static-php-cli</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-8eab0e6d data-v-acee064b data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-d8fae6e2><span class="text" data-v-d8fae6e2><span class="vpi-languages option-icon" data-v-d8fae6e2></span><!----><span class="vpi-chevron-down text-icon" data-v-d8fae6e2></span></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><div class="items" data-v-acee064b><p class="title" data-v-acee064b>English</p><!--[--><div class="VPMenuLink" data-v-acee064b data-v-f2aefde6><a class="VPLink link" href="/zh/" data-v-f2aefde6><!--[--><span data-v-f2aefde6>简体中文</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-8eab0e6d data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8eab0e6d data-v-ef6192dc data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/static-php/phpmicro" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8eab0e6d data-v-f953d92f data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d8fae6e2><span class="vpi-more-horizontal icon" data-v-d8fae6e2></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><div class="group translations" data-v-f953d92f><p class="trans-title" data-v-f953d92f>English</p><!--[--><div class="VPMenuLink" data-v-f953d92f data-v-f2aefde6><a class="VPLink link" href="/zh/" data-v-f2aefde6><!--[--><span data-v-f2aefde6>简体中文</span><!--]--></a></div><!--]--></div><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/static-php/phpmicro" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8eab0e6d data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-8eab0e6d><div class="divider-line" data-v-8eab0e6d></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-304c8b69 data-v-5ae341c6><div class="container" data-v-5ae341c6><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-5ae341c6><span class="vpi-align-left menu-icon" data-v-5ae341c6></span><span class="menu-text" data-v-5ae341c6>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5ae341c6 data-v-e28a51a6><button data-v-e28a51a6>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-304c8b69 data-v-e0eef791><div class="curtain" data-v-e0eef791></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e0eef791><span class="visually-hidden" id="sidebar-aria-label" data-v-e0eef791> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Guide</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/build-micro.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Building micro SAPI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/customization.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Customizing micro SAPI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/digging-deeper.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Digging Deeper</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-304c8b69 data-v-2652e39a><div class="VPDoc has-sidebar has-aside" data-v-2652e39a data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>On this page</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-b7d7ef80><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _en_" data-v-d668f7cc><div><h1 id="micro-sapi-for-php" tabindex="-1">micro SAPI for PHP <a class="header-anchor" href="#micro-sapi-for-php" aria-label="Permalink to “micro SAPI for PHP”">​</a></h1><p>Welcome to the static-php micro SAPI documentation!</p><p>This documentation is adapted from the original <a href="https://github.com/easysoft/phpmicro" target="_blank" rel="noreferrer">easysoft/phpmicro</a> project&#39;s <a href="https://docs.toast.run/micro/en/" target="_blank" rel="noreferrer">documentation</a>, with partial improvements. Some documentation content is referenced from the original project documentation.</p><p>This documentation is published under the same license as the original documentation, CC BY-SA 4.0. For details, please refer to the <a href="./../LICENSE-CC.html">License</a>.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to “Overview”">​</a></h2><p>This phpmicro documentation is suitable for the <a href="https://github.com/static-php/phpmicro" target="_blank" rel="noreferrer">static-php/phpmicro</a> project, which is forked from <a href="https://github.com/easysoft/phpmicro" target="_blank" rel="noreferrer">easysoft/phpmicro</a> with partial improvements. Some documentation content is referenced from the original project documentation.</p><p>micro SAPI is a SAPI module for PHP that allows you to create self-executable PHP binaries. By concatenating the micro SAPI binary with your PHP source code or PHAR files, you can run PHP applications without requiring a separate PHP installation.</p><p>No heavyweight Docker images, no pre-installed PHP environment required—just a single compact binary to run your PHP applications.</p><h2 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to “How It Works”">​</a></h2><p>PHP has multiple SAPI (Server API) interfaces that allow PHP to run in different ways. The most common SAPIs are fpm (FastCGI Process Manager) and cli (Command Line Interface).</p><p>Taking CLI as an example, the CLI SAPI allows us to run PHP scripts from the command line. We can execute PHP code directly in the terminal, which is suitable for writing command-line tools and scripts. The execution method is also the simplest.</p><p><img src="/assets/cli.BV9OGBxf.png" alt=""></p><p>For micro SAPI, it works similarly to CLI SAPI, but it allows us to concatenate PHP code into a self-executable binary file. This binary file contains both the PHP interpreter and your application code.</p><p><img src="/assets/micro.BDY9uTG5.png" alt=""></p><p>You might think it&#39;s similar to self-extracting archives provided by compression software like WinRAR, but they actually work differently. WinRAR&#39;s self-extracting archives are compressed packages that extract contents to a temporary directory before execution, while micro SAPI directly concatenates the PHP interpreter and code together, requiring no extraction at runtime—it executes directly.</p><h2 id="use-cases" tabindex="-1">Use Cases <a class="header-anchor" href="#use-cases" aria-label="Permalink to “Use Cases”">​</a></h2><p>First, compared to traditional PHP execution methods (cli, fpm, apache-mod-php, etc.), micro SAPI solves an important problem: <strong>no pre-installed PHP environment required</strong>. This greatly facilitates PHP developers in writing general-purpose command-line tools. Users only need to download a single binary file to run it, without worrying about PHP versions and extension dependencies.</p><p>If we compare it with other languages&#39; capabilities for building portable tools, you&#39;ll find that micro SAPI addresses many issues encountered when building portable tools in other languages.</p><ul><li><strong>Go</strong>: Go can compile into statically linked binaries, but requires recompilation every time the code is modified.</li><li><strong>Python</strong>: Python requires a pre-installed Python interpreter. Even with tools like PyInstaller for packaging, it still extracts to a temporary directory at execution time, adding I/O overhead.</li><li><strong>Bash scripts</strong>: Windows users need to pre-install a Bash interpreter, and the syntax is not flexible enough.</li><li><strong>Java</strong>: Packaging Java as a JAR requires a pre-installed Java Runtime Environment (JRE), and loading numerous class libraries at startup makes it relatively slow to start.</li></ul><p>Micro SAPI combines the advantages of static compilation and interpreted execution—no pre-installed PHP environment needed, no recompilation required for every code change, and fast startup times, making it ideal for building portable command-line tools.</p><ul><li><strong>Flexible PHP syntax</strong>: PHP syntax is simple and easy to learn, suitable for quickly writing scripts and tools.</li><li><strong>Rich extension support</strong>: Most PHP extensions are developed in C and can be easily embedded and built into PHP binaries.</li><li><strong>Cross-platform friendly</strong>: Compared to Bash scripts, writing scripts with micro SAPI provides better Windows platform support.</li><li><strong>Fast startup</strong>: The PHP interpreter starts quickly, with no step involved in extracting PHP code to a temporary directory.</li><li><strong>Simple dependency management</strong>: Mainstream PHP C extensions can all be statically compiled, and Composer dependencies can be packaged into PHAR files, greatly simplifying dependency management.</li></ul><p>Of course, micro SAPI also has some limitations:</p><ul><li><strong>Not suitable for web applications</strong>: micro SAPI is primarily aimed at command-line tools and scripts, not suitable for building traditional fpm applications. Of course, you can use CLI-compatible extensions like Swoole to implement web services.</li><li><strong>No source code protection</strong>: micro does not provide source code encryption or obfuscation—PHP code remains in plaintext.</li><li><strong>Changing extensions requires rebuilding</strong>: If you need to add or remove PHP extensions, you must rebuild the micro SAPI binary.</li></ul><p>Since it&#39;s essentially not a traditional SAPI, you may encounter compatibility issues in some special scenarios. Please refer to the Compatibility section below for details.</p><h2 id="compatibility" tabindex="-1">Compatibility <a class="header-anchor" href="#compatibility" aria-label="Permalink to “Compatibility”">​</a></h2><p>For PHP itself, micro SAPI supports PHP versions from 8.0 to the latest 8.5.</p><p>For PHP code compatibility, micro SAPI supports most CLI-based PHP applications and scripts. As long as your code doesn&#39;t depend on specific SAPI features, it will usually run normally.</p><p>For PHP extension compatibility, micro SAPI supports most commonly used PHP extensions, such as pdo, openssl, mbstring, etc. However, some extensions that perform SAPI type checks may not work properly, as they may check the SAPI type and fail to work if it&#39;s not detected as CLI.</p></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/en/index.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Introduction</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-304c8b69 data-v-5b9946f5><div class="container" data-v-5b9946f5><p class="message" data-v-5b9946f5>Released under the Apache-2.0 License.</p><!----></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"en_build-micro.md\":\"DCI-NmdS\",\"en_customization.md\":\"DADGnChZ\",\"en_digging-deeper.md\":\"eQIBu0at\",\"en_index.md\":\"CIs_RpW8\",\"index.md\":\"DyFlwFNQ\",\"license-cc.md\":\"BXyAY_W1\",\"zh_build-micro.md\":\"DzGduBeQ\",\"zh_customization.md\":\"DHRU6JbE\",\"zh_digging-deeper.md\":\"CR6diZIF\",\"zh_index.md\":\"C8JN0Leg\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"micro SAPI\",\"description\":\"micro SAPI makes PHP self-executable, allowing you to run php-cli apps without any PHP installation.\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/static-php/phpmicro\"}],\"footer\":{\"message\":\"micro SAPI released under the Apache-2.0 License | Documentation under CC BY 4.0.\"}},\"locales\":{\"en\":{\"label\":\"English\",\"lang\":\"en\",\"link\":\"/en/\",\"themeConfig\":{\"footer\":{\"message\":\"Released under the Apache-2.0 License.\"},\"nav\":[{\"text\":\"Guide\",\"link\":\"/en/\"},{\"text\":\"static-php-cli\",\"link\":\"https://static-php.dev\"}],\"sidebar\":[{\"text\":\"Guide\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/en/index\"},{\"text\":\"Building micro SAPI\",\"link\":\"/en/build-micro\"},{\"text\":\"Customizing micro SAPI\",\"link\":\"/en/customization\"},{\"text\":\"Digging Deeper\",\"link\":\"/en/digging-deeper\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/static-php/phpmicro\"}]}},\"zh\":{\"label\":\"简体中文\",\"lang\":\"zh\",\"link\":\"/zh/\",\"themeConfig\":{\"footer\":{\"message\":\"Released under the Apache-2.0 License.\"},\"nav\":[{\"text\":\"指南\",\"link\":\"/zh/\"},{\"text\":\"static-php-cli\",\"link\":\"https://static-php.dev\"}],\"sidebar\":[{\"text\":\"指南\",\"items\":[{\"text\":\"简介\",\"link\":\"/zh/index\"},{\"text\":\"构建 micro SAPI\",\"link\":\"/zh/build-micro\"},{\"text\":\"配置 micro SAPI\",\"link\":\"/zh/customization\"},{\"text\":\"深入 micro SAPI\",\"link\":\"/zh/digging-deeper\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/static-php/phpmicro\"}],\"outlineTitle\":\"页面导航\",\"lastUpdatedText\":\"最后更新于\",\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"}}}},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>